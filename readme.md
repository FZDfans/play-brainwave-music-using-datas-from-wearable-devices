# 基于深度学习和快速傅里叶变换的综合关联模型+可执行函数

## 目录结构说明

打开这个压缩包后，你会看到以下六个文件夹：

1. **emulation**（仿真）：这是主要使用的文件夹，包含实际需要用到的代码和文件。
2. **其他五个文件夹**：这些文件夹包含了每一个模块的测试文件，成功测试后整合到了 `emulation` 文件夹中。

## 进入 emulation 文件夹

在 `emulation` 文件夹中，你会看到以下文件和子文件夹：

1. **系统文件**:
   - `.idea` 文件夹
   - `_pycache_` 文件夹
   - `tempCodeRunnerFile.py`
   
   这些是系统生成的文件，不需要关注。

2. **`函数sig.py`**:
   - 功能：输出并处理虚拟手环信号，将信号处理为 `abc.csv` 文件。
   - 注意：实际应用中，应该用手环实际传递的数据替代虚拟信号。

3. **`函数extraction.py`**:
   - 功能：`sig.py` 中的子函数，用于提取数据。
   - 注意：无需特别关注。

4. **`函数save.py`**:
   - 功能：`sig.py` 中的子函数，用于保存数据。
   - 注意：无需特别关注。

5. **`函数HBR.py`** (Human Behavior Recognition):
   - 功能：使用预训练的神经网络模型 `model.pth` 来提取手环数据中的加速度 (Ax, Ay, Az) 并预测人的行为。
   - 注意：训练代码和训练集位于主目录的 `prain` 文件夹中，这部分非常稳定，不建议修改参数。

6. **`函数HRprocess.py`**:
   - 功能：处理手环采集的心率-时间数据，包括去除基准线和降噪操作。
   - 注意：无需调节参数。

7. **`函数HR.py`**:
   - 功能：对处理后的心率数据进行快速傅里叶变换 (FFT) 和频域分析，计算功率密度谱，并在低频和高频区域分别积分，得到 HF/LF 比值，以评估交感神经和副交感神经的兴奋程度。

8. **`函数send_speaker.py`**:
   - 功能：将指示变量 `X` 传递给蓝牙音箱，通过 `X` 的值来播放不同的音乐。
   - 注意：需要正确设置音箱的地址。

9. **`函数music_lib`**:
   - 功能：存储生成的脑波音乐库，并标注了音乐的类型（四种脑波）。播放逻辑如下：
     - `X == 1`：播放 Beta 脑波音乐
     - `X == 2`：播放 Alpha 脑波音乐
     - `X == 3`：播放 Delta 或 Theta 脑波音乐

## 说明

- **`函数HBR.py`** 中使用的模型和训练数据应保持不变，确保行为识别的准确性。
- **`函数HRprocess.py`** 和 **`函数HR.py`** 的参数经过精心调整，不建议进行修改。
- **`函数send_speaker.py`** 的蓝牙地址需正确配置，以确保指示变量 `X` 能正确传递到音箱。

作者：凌望尧